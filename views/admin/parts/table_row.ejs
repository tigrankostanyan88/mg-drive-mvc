<% 
    const roles = ['team-member', 'student', 'user', 'admin']; 
    const options = [tableUser.role];
     roles.forEach(role => {
    if (!options.includes(role)) options.push(role);
  });
%>

<tr>
    <td>
        <%
            let image = { img: "../client/images/no-image-profile.jpg" };
            if(tableUser) {
                if (tableUser.files) {
                    let foundImage = tableUser.files.find(file => file.name_used === "user_img");
                    
                    if (foundImage) {
                    image.img = `../client/images/users/large/${foundImage.name}.${foundImage.ext}`;
                    }
                }
            }
        %>
        <img src="<%- image.img %>" alt="image" class="img-fluid" >
        <span class="pl-2"><%- tableUser.name %></span>
    </td>
    <td>
        <a href="tel:<%- tableUser.phone %>"><%- tableUser.phone %></a>
    </td>
    <td>
        <a href="tel:<%- tableUser.phone %>"><%- tableUser.email %></a>
    </td>
    <td> <%- helpers.getDate(tableUser.date) %></td>
    <td>
        <form action="/api/v1/user/<%- tableUser.id %>" method="patch" class=" d-flex">
            <select class="btn btn-secondary dropdown-toggle text-start mx-1" name="role">
                <% options.forEach(option => { %>
                <option value="<%- option %>" <%- option == tableUser.role ? 'selected' : '' %>>
                    <%- option %>
                </option>
                <% }); %>
            </select>
            <button type="submit" class="btn btn-outline-warning btn-icon-text">
                <i class="mdi mdi-reload btn-icon-prepend"></i> Թարմացնել </button>
        </form>
    </td>
    <!-- remove student -->
    <td class="text-start">
        <button type="button" class="btn btn-inverse-danger btn-fw px-2">Ջնջել</button>
    </td>
</tr>